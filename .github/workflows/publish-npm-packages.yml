name: Publish npm packages 🛰️

on:
  push:
    # tags:
    #   - "@chainflip-io/cli/v*"

permissions:
  packages: write
  contents: read

env:
  NODE_AUTH_TOKEN: ${{ secrets.GITHUB_TOKEN }}

jobs:
  publish-cli:
    uses: ./.github/workflows/_npm_publish.yml
    with:
      package_registry: "https://npm.pkg.github.com"
      package_scope: "@chainflip-io"
      build_cmd: pnpm --filter @chainflip-io/cli build
      publish_cmd: pnpm --filter @chainflip-io/cli publish
    secrets: inherit
